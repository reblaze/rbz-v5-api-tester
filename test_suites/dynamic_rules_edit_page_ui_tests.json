{
    "Name": "TA 1393 Dynamic rules edit page ui tests",
    "Skip": false,
    "Tests": [
        {
            "Name": "Test 1: Name field validations",
            "Skip": false,
            "Steps": [
                {
                    "Name": "Step: Create a dynamic rule with name `dynamic_rule_text_name'",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rules",
                        "Path": "/dynamic_rule_text_name"
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_text_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\"dynamic_rule_text_name\""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "201",
                        "Type": "json",
                        "Single": true,
                        "SingleResult": [
                            {
                                "Key": "message",
                                "Value": "Successfully created entry"
                            }
                        ]
                    }
                },
                {
                    "Name": "Step: User cannot create a dynamic rule with empty name",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rules",
                        "Path": "/dynamic_rule_empty_name"
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_empty_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\"\""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "500",
                        "Type": "json",
                        "Single": true,
                        "SingleResult": [
                            {
                                "Key": "message",
                                "Value": "'' is too short\\n\\nFailed validating 'minLength' in schema['properties']['name']:\\n    {'description': 'Name of entity shown in UI',\\n     'minLength': 1,\\n     'title': 'Name',\\n     'type': 'string'}\\n\\nOn instance['name']:\\n    ''"
                            }
                        ]
                    }
                },
                {
                    "Name": "Step: User cannot create a dynamic rule with exist name",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rule",
                        "Path": ""
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_exist_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\"dynamic_rule_text_name\""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "409",
                        "Type": "content",
                        "Single": true,
                        "Text": "b'409 Conflict: entry with name dynamic_rule_text_name already exists in document [contentfilterrules]'"
                    }
                },
                {
                    "Name": "Step: User can create a dynamic rule with long name",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rule",
                        "Path": ""
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_long_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "200",
                        "Type": "json",
                        "Single": true,
                        "SingleResult": [
                            {
                                "Key": "ok",
                                "Value": true
                            }
                        ]
                    }
                },
                {
                    "Name": "Step: User can create a dynamic rule with special chars name",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rule",
                        "Path": ""
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_spec_chars_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\"!@#$%^&*()<>'_-.\""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "200",
                        "Type": "json",
                        "Single": true,
                        "SingleResult": [
                            {
                                "Key": "ok",
                                "Value": true
                            }
                        ]
                    }
                },
                {
                    "Name": "Step: User cannot create a dynamic rule with space char name",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rule",
                        "Path": ""
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_space_char_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\" \""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "400",
                        "Type": "content",
                        "Single": true,
                        "Text": "b''"
                    }
                },
                {
                    "Name": "Step: User can create a dynamic rule with leading space char name",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rule",
                        "Path": ""
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_leading_space_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\"  dynamic_rule_leading_space_name\""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "200",
                        "Type": "json",
                        "Single": true,
                        "SingleResult": [
                            {
                                "Key": "ok",
                                "Value": true
                            }
                        ]
                    }
                },
                {
                    "Name": "Step: User check dynamic rule with leading space char name",
                    "Skip": false,
                    "GenerateID": false,
                    "API":
                    {
                        "Base": "api-dynamic-rule",
                        "Path": "dynamic_rule_leading_space_name/"
                    },
                    "Method" :"GET",
                    "Expected":
                    {
                        "Code": "200",
                        "Type": "json",
						"Single": true,
                        "SingleResult":
                        [
                            {
                                "Key": "name",
                                "Value": "dynamic_rule_leading_space_name"
                            },
                            {
                                "Key": "id",
                                "Value": "dynamic_rule_leading_space_name"
                            }
                        ]
                    }
                },
                {
                    "Name": "Step: User can create a dynamic rule with trailing space char name",
                    "Skip": false,
                    "GenerateID": false,
                    "API": {
                        "Base": "api-dynamic-rule",
                        "Path": ""
                    },
                    "Method": "POST",
                    "Payload": {
                        "Params": [
                            {
                                "Key": "id",
                                "Value": "\"dynamic_rule_trailing_space_name\""
                            },
                            {
                                "Key": "name",
                                "Value": "\"dynamic_rule_trailing_space_name  \""
                            }
                        ]
                    },
                    "Expected": {
                        "Code": "200",
                        "Type": "json",
                        "Single": true,
                        "SingleResult": [
                            {
                                "Key": "ok",
                                "Value": true
                            }
                        ]
                    }
                },
                {
                    "Name": "Step: User check dynamic rule with trailing space char name",
                    "Skip": false,
                    "GenerateID": false,
                    "API":
                    {
                        "Base": "api-dynamic-rule",
                        "Path": "dynamic_rule_trailing_space_name/"
                    },
                    "Method" :"GET",
                    "Expected":
                    {
                        "Code": "200",
                        "Type": "json",
						"Single": true,
                        "SingleResult":
                        [
                            {
                                "Key": "name",
                                "Value": "dynamic_rule_trailing_space_name"
                            },
                            {
                                "Key": "id",
                                "Value": "dynamic_rule_trailing_space_name"
                            }
                        ]
                    }
                }
            ]
        }
    ]
}
